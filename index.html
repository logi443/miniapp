<!doctype html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>M‑VPN راهنمای اتصال</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/rastikerdar/iransans-font@v1.0.5/dist/font-face.css" as="style">
<style>
@import url('https://cdn.jsdelivr.net/gh/rastikerdar/iransans-font@v1.0.5/dist/font-face.css');

:root{
  --accent1:#6b5cff;   /* بنفش (دانلود) */
  --accent2:#5ac8ff;   /* فیروزه‌ای (آموزش ویدیویی) */
  --card-bg:linear-gradient(135deg,var(--accent1),var(--accent2));
  --white:#fff;
  --text:#222;
  --muted:#6b6b78;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:"IranSans",system-ui;
  background:#fff;
  color:var(--text);
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding:28px 16px;
}
.app{max-width:620px;width:100%;}
.title{text-align:center;margin:18px 0;font-size:22px;font-weight:700;}
.title .word{display:inline-block;background:linear-gradient(90deg,var(--accent1),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.card{background:#fff;border-radius:14px;padding:18px;box-shadow:0 8px 28px rgba(20,20,60,0.06);margin-bottom:18px;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;}

/* انیمیشن‌های عمومی */
@keyframes fadeUp { from{opacity:0; transform:translateY(10px)} to{opacity:1; transform:translateY(0)} }
@keyframes fadeIn { from{opacity:0} to{opacity:1} }
.stagger-item{ opacity:0; animation: fadeUp .5s ease forwards; }
.step-appear{ opacity:0; animation: fadeUp .5s ease forwards; }
.actions-appear{ opacity:0; animation: fadeIn .5s .2s ease forwards; }

/* دکمه‌های اصلی (OS و برنامه‌ها) — وسط‌چین + انیمیشن هاور */
.btn{
  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;width:100%;
  padding:14px;border-radius:10px;border:1px solid rgba(107,92,255,0.12);
  background:linear-gradient(180deg,rgba(107,92,255,0.06),rgba(90,200,255,0.02));
  color:var(--accent1);cursor:pointer;text-align:center;
  transition:transform .18s ease, box-shadow .18s ease, filter .18s ease;
  will-change: transform;
}
.btn:hover{ transform:translateY(-3px) scale(1.02); box-shadow:0 10px 26px rgba(20,20,60,.10); }
.btn:active{ transform:translateY(-1px) scale(1.01); }
.logo-wrap{width:40px;height:40px;border-radius:8px;background:rgba(107,92,255,0.08);display:flex;align-items:center;justify-content:center;overflow:hidden;}
.logo-wrap img{width:100%;height:100%;object-fit:cover;display:block;}

.tutorial-wrap{margin-top:12px;display:flex;flex-direction:column;gap:12px;}
.step-card{display:flex;gap:12px;align-items:flex-start;background:var(--card-bg);color:var(--white);border-radius:12px;padding:14px;box-shadow:0 8px 20px rgba(107,92,255,0.12);}
.step-num{min-width:44px;height:44px;border-radius:50%;background:var(--white);color:var(--accent1);display:flex;align-items:center;justify-content:center;font-weight:800;font-size:16px;}
.step-body{flex:1;}
.step-body p{margin:6px 0;line-height:1.6;font-size:15px;}

/* ناحیه اکشن‌ها (ویدئو + دانلود) */
.actions{display:flex;flex-direction:column;align-items:center;gap:8px;margin-top:12px;}
.action-btn{
  display:flex;align-items:center;justify-content:center;color:#fff;border-radius:24px;padding:12px 20px;
  font-size:15px;text-decoration:none;width:100%;max-width:260px;gap:8px;
  transition: transform .18s ease, box-shadow .18s ease, filter .18s ease;
  will-change: transform;
}
.action-btn:hover{ transform: translateY(-3px) scale(1.02); box-shadow:0 10px 26px rgba(20,20,60,.18); }
.action-btn:active{ transform: translateY(-1px) scale(1.01); }
.action-btn i{font-size:16px;}

/* گزینه ۱: رنگ متمایز برای دو دکمه */
.action-btn.video{    /* آموزش ویدیویی: فیروزه‌ای */
  background: linear-gradient(135deg, var(--accent2), #00bfff);
}
.action-btn.download{ /* دانلود آخرین ورژن: بنفش */
  background: linear-gradient(135deg, var(--accent1), #7b70ff);
}

.tutorial-title{text-align:center;margin-bottom:8px;color:var(--text);display:flex;flex-direction:column;align-items:center;gap:8px;}
.tutorial-title .logo-wrap{width:48px;height:48px;}
.card, .card *, .step-card, .step-card *{font-weight:700!important;}

/* عنوان انیمیشنی */
.title{
  text-align:center;
  margin:18px 0;
  font-size:22px;
  font-weight:700;
}
.title .word{
  display:inline-block;
  opacity:0;
  transform:translateY(8px);
  animation:fadeword 900ms ease forwards;
}
.title .word.w1{animation-delay:0ms;}
.title .word.w2{animation-delay:220ms;}
.title .word.w3{animation-delay:440ms;}
.title .word.w4{animation-delay:660ms;}
.title .word{
  background:linear-gradient(90deg,var(--accent1),var(--accent2));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
@keyframes fadeword{ to{opacity:1;transform:translateY(0);} }
</style>
</head>
<body>
<div class="app">
  
  <div class="title" aria-hidden="true">
    <span class="word w1">راهنمای</span>&nbsp;
    <span class="word w2">اتصال</span>&nbsp;
    <span class="word w3">سرویس‌های</span>&nbsp;
    <span class="word w4">M‑VPN</span>
  </div>

  <div id="step-os" class="card">
    <div style="margin-bottom:8px">۱ — سیستم‌عامل خود را انتخاب کنید</div>
    <div class="grid" id="os-grid"></div>
  </div>

  <div id="step-app" class="card" style="display:none">
    <div style="margin-bottom:8px">۲ — برنامهٔ خود را انتخاب کنید</div>
    <div id="apps" class="grid"></div>
    <button class="btn" style="margin-top:16px" onclick="goBack(1)">بازگشت</button>
  </div>

  <div id="step-tutorial" class="card" style="display:none">
    <div id="tutorial-title" class="tutorial-title" style="display:none">
      <span class="logo-wrap"><img id="tutorial-logo" alt=""></span>
      <div id="tutorial-title-text"></div>
    </div>
    <div id="tutorial-area" class="tutorial-wrap"></div>
    <!-- actions area: video (if link exists) + download button -->
    <div class="actions" id="actions"></div>
    <button class="btn" style="margin-top:12px" onclick="goBack(2)">بازگشت</button>
  </div>

  <div class="footer" style="text-align:center;color:var(--muted);font-size:13px;">
    طراحی شده توسط تیم <a href="https://t.me/nv443" target="_blank" style="color:var(--accent1);text-decoration:underline;">M‑VPN</a>
  </div>
</div>

<script>
/* لینک‌های لوگو — اینجا قرار گرفته‌اند */
const osLogos = {
  Android: "https://cdn.jsdelivr.net/gh/logi443/miniapp/Android.svg",
  iOS: "https://cdn.jsdelivr.net/gh/logi443/miniapp/AppleFilled.svg",
  Windows: "https://cdn.jsdelivr.net/gh/logi443/miniapp/WindowsFilled.svg",
  macOS: "https://cdn.jsdelivr.net/gh/logi443/miniapp/Macosx.svg"
};

/* شامل Npv Tunnel */
const appLogos = {
  v2rayNg: "https://cdn.jsdelivr.net/gh/logi443/miniapp/a.png",
  v2box: "https://cdn.jsdelivr.net/gh/logi443/miniapp/unnamed.png",
  Shadowrocket: "https://cdn.jsdelivr.net/gh/logi443/miniapp/gcxQW6z3_400x400.jpg",
  Streisand: "https://cdn.jsdelivr.net/gh/logi443/miniapp/9250996.64.webp",
  V2rayN: "https://cdn.jsdelivr.net/gh/logi443/miniapp/a.png",
  "Npv Tunnel": "https://cdn.jsdelivr.net/gh/logi443/miniapp/60x60bb.jpg"
};
/* ویدئوی آموزشی — خالی باشد دکمه نشان داده نمی‌شود */
const videoLinks={
  Android:{v2rayNg:"https://t.me/helpnv443/46",v2box:"https://t.me/helpnv443/44","Npv Tunnel":"https://t.me/helpnv443/62"},
  iOS:{v2box:"https://t.me/helpnv443/42",Shadowrocket:"",Streisand:"https://t.me/helpnv443/45","Npv Tunnel":"https://t.me/helpnv443/62"},
  Windows:{V2rayN:"https://t.me/helpnv443/63"},
  macOS:{Streisand:"",Shadowrocket:""}
};

/* برنامه‌ها برای هر سیستم‌عامل */
const appsByOS={Android:["v2rayNg","v2box","Npv Tunnel"],iOS:["v2box","Shadowrocket","Streisand","Npv Tunnel"],Windows:["V2rayN"],macOS:["Streisand","Shadowrocket"]};

/* لینک دانلود‌ها */
const downloadLinks={Android:{v2rayNg:"https://logi443.github.io/v2ray",v2box:"https://play.google.com/store/apps/details?id=dev.hexasoftware.v2box","Npv Tunnel":"https://play.google.com/store/apps/details?id=com.napsternetlabs.napsternetv"},iOS:{v2box:"https://apps.apple.com/app/id6446814690",Shadowrocket:"https://apps.apple.com/app/id932747118",Streisand:"https://apps.apple.com/app/id6450534064","Npv Tunnel":"https://apps.apple.com/app/id1629465476"},Windows:{V2rayN:"https://github.com/2dust/v2rayN/releases/download/7.15.6/v2rayN-windows-64-SelfContained.zip"},macOS:{Streisand:"https://apps.apple.com/us/app/streisand/id6450534064",Shadowrocket:"https://apps.apple.com/app/id932747118"}};

/* آموزش‌ها */
const tutorials={
  Android:{
    v2rayNg:["منوی همبرگری ☰ بالا را بزنید.","از منوی همبرگری گزینه Setting را انتخاب کنید.","گزینه تنظیمات پیشرفته را بزنید و گزینه Allow insecure را فعال کنید.","به صفحه اصلی برگردید، مثبت بالا را بزنید و گزینه وارد کردن از کلیپ‌بورد را انتخاب کنید."],
    v2box:["ستینگ برنامه را باز کنید.","گزینه Allow insecure را روشن کنید.","از بخش Configs مثبت بالا را بزنید و گزینه Import V2Ray URI from Clipboard را انتخاب کنید.","روی اسم کانفیگ بزنید و از پایین صفحه Slide to connect را به سمت راست بکشید."],
    "Npv Tunnel":[
      "ابتدا کانفیگ‌تون را کپی کنید.",
      "بخش configs مثبت را بزنید.",
      "گزینه «Import config from Clipboard» را بزنید، سپس «V2ray config» را انتخاب کنید و در ادامه «Allow past» را بزنید.",
      "پس از وارد شدن، روی اسم کانفیگ لمس کنید و از منوی Home دکمه اتصال را بزنید."
    ]
  },
  iOS:{
    v2box:["ستینگ برنامه را باز کنید.","گزینه Allow insecure را روشن کنید.","از بخش Configs مثبت بالا را بزنید و گزینه Import V2Ray URI from Clipboard را انتخاب کنید.","روی اسم کانفیگ بزنید و از پایین صفحه Slide to connect را به سمت راست بکشید."],
    Shadowrocket:["روی منو Config بزنید و + بالا را بزنید، کانفیگ خود را Paste کرده و Download را بزنید.","به منوی Home برگردید، روی اسم کانفیگ لمس کنید و دکمه اتصال را بزنید.","اگر وصل نشد، روی علامت تعجب بزنید، گزینه TLS را انتخاب و Allow insecure را روشن کنید. سپس یک مرحله به عقب برگردید، Save را بزنید و متصل شوید."],
    Streisand:["ستینگ برنامه را باز کنید.","از بالا گزینه سوم Subscription را انتخاب کنید.","گزینه‌های Update on open و Allow insecure را روشن کنید.","از تب Home مثبت بالا را بزنید و گزینه Import from clipboard را انتخاب کنید.","روی اسم کانفیگ لمس کنید و دکمه اتصال را بزنید."],
    "Npv Tunnel":[
      "ابتدا کانفیگ‌تون را کپی کنید.",
      "بخش configs مثبت را بزنید.",
      "گزینه «Import config from Clipboard» را بزنید، سپس «V2ray config» را انتخاب کنید و در ادامه «Allow past» را بزنید.",
      "پس از وارد شدن، روی اسم کانفیگ لمس کنید و از منوی Home دکمه اتصال را بزنید."
    ]
  },
  Windows:{ V2rayN:["این بخش نیاز به آموزش تصویری دارد. لطفاً ویدیوی زیر را مشاهده کنید."] },
  macOS:{
    Streisand:["ستینگ برنامه را باز کنید.","از بالا گزینه سوم Subscription را انتخاب کنید.","گزینه‌های Update on open و Allow insecure را روشن کنید.","از تب Home مثبت بالا را بزنید و گزینه Import from clipboard را انتخاب کنید.","روی اسم کانفیگ لمس کنید و دکمه اتصال را بزنید."],
    Shadowrocket:["روی منو Config بزنید و + بالا را بزنید، کانفیگ خود را Paste کرده و Download را بزنید.","به منوی Home برگردید، روی اسم کانفیگ لمس کنید و دکمه اتصال را بزنید.","اگر وصل نشد، روی علامت تعجب بزنید، گزینه TLS را انتخاب و Allow insecure را روشن کنید. سپس یک مرحله به عقب برگردید، Save را بزنید و متصل شوید."]
  }
};

/* --- Helpers for staggered animations --- */
function animateStagger(container){
  // apply increasing delay to each child with .stagger-item
  const items = container.querySelectorAll('.stagger-item');
  items.forEach((el, i)=>{
    el.style.animationDelay = (i * 150) + 'ms';
  });
}

/* Tools */
function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1).toLowerCase();}
function makeLogo(url){const wrap=document.createElement('span');wrap.className='logo-wrap';if(url){const img=document.createElement('img');img.src=url;img.alt='logo';wrap.appendChild(img);}return wrap;}

/* Render OS buttons on load with stagger */
(function renderOSButtons(){
  const grid=document.getElementById('os-grid');
  Object.keys(appsByOS).forEach(os=>{
    const btn=document.createElement('button');btn.className='btn stagger-item';
    const logo=makeLogo(osLogos[os]||'');const label=document.createElement('span');label.textContent=os;
    btn.appendChild(logo);btn.appendChild(label);btn.onclick=()=>selectOS(os);grid.appendChild(btn);
  });
  animateStagger(grid);
})();

function selectOS(os){
  document.getElementById('step-os').style.display='none';
  document.getElementById('step-app').style.display='block';
  const grid=document.getElementById('apps');grid.innerHTML='';
  (appsByOS[os]||[]).forEach(app=>{
    const btn=document.createElement('button');btn.className='btn stagger-item';
    const logo=makeLogo(appLogos[app]||'');const label=document.createElement('span');label.textContent=capitalize(app);
    btn.appendChild(logo);btn.appendChild(label);btn.onclick=()=>selectApp(os,app);grid.appendChild(btn);
  });
  animateStagger(grid);
}

function selectApp(os,app){
  document.getElementById('step-app').style.display='none';
  document.getElementById('step-tutorial').style.display='block';
  renderTutorial(os,app);
}

function renderTutorial(os,app){
  const title=document.getElementById('tutorial-title');
  const logo=document.getElementById('tutorial-logo');
  const text=document.getElementById('tutorial-title-text');
  title.style.display='flex';
  text.textContent='آموزش گام‌به‌گام برنامهٔ '+capitalize(app);
  logo.src=appLogos[app]||''; logo.style.display=appLogos[app]?'block':'none';

  const wrap=document.getElementById('tutorial-area'); wrap.innerHTML='';

  // Steps appear sequentially (one-by-one)
  const steps=(tutorials[os]&&tutorials[os][app])?tutorials[os][app]:[];
  let delay=0;
  steps.forEach((t,i)=>{
    const c=document.createElement('div'); c.className='step-card step-appear';
    c.style.animationDelay = (i * 160) + 'ms';
    c.innerHTML='<div class="step-num">'+(i+1)+'</div><div class="step-body"><p>'+t+'</p></div>';
    wrap.appendChild(c);
  });

  // then show actions after steps
  const actions=document.getElementById('actions'); actions.innerHTML='';
  actions.classList.remove('actions-appear');
  void actions.offsetWidth; // reflow
  actions.classList.add('actions-appear');

  const vlink=(videoLinks[os]&&videoLinks[os][app])?videoLinks[os][app]:"";
  if(vlink){
    const v=document.createElement('a');
    v.className='action-btn video';
    v.href=vlink; v.target='_blank'; v.rel='noopener';
    v.innerHTML='<i class="fa-solid fa-play"></i> آموزش تصویری';
    actions.appendChild(v);
  }

  const link=(downloadLinks[os]&&downloadLinks[os][app])?downloadLinks[os][app]:'#';
  const d=document.createElement('a');
  d.className='action-btn download';
  d.href=link; d.target='_blank'; d.rel='noopener';
  d.innerHTML='<i class="fa-solid fa-download"></i> دانلود آخرین ورژن';
  actions.appendChild(d);
}

function goBack(step){
  if(step===1){
    document.getElementById('step-os').style.display='block';
    document.getElementById('step-app').style.display='none';
    // re-run stagger for OS grid (already has stagger-item)
    animateStagger(document.getElementById('os-grid'));
  }else if(step===2){
    document.getElementById('step-app').style.display='block';
    document.getElementById('step-tutorial').style.display='none';
  }
}
</script>
</body></html>
